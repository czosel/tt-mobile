generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["relationJoins"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Club {
  id      Int      @id
  name    String
  logo    String?
  players Player[]
  teams   Team[]

  @@map("club")
}

model Team {
  id         Int    @id
  name       String
  clubId     Int
  club       Club   @relation(fields: [clubId], references: [id])
  homeGames  Game[] @relation("HomeGames")
  guestGames Game[] @relation("GuestGames")

  @@map("team")
}

model Player {
  id        Int    @id
  firstName String
  lastName  String
  clubId    Int?
  club      Club?  @relation(fields: [clubId], references: [id])

  @@map("player")
}

model Game {
  id      Int      @id
  homeId  Int
  guestId Int
  result  String
  date    DateTime @db.Date
  home    Team     @relation("HomeGames", fields: [homeId], references: [id])
  guest   Team     @relation("GuestGames", fields: [guestId], references: [id])

  @@map("game")
}
