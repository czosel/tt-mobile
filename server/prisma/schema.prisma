generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["relationJoins"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Club {
  id      Int      @id
  name    String
  logo    String?
  players Player[]
  teams   Team[]

  @@map("club")
}

model League {
  id      Int      @id
  name    String
  teams   Team[]

  @@map("league")
}

model Team {
  id         Int    @id
  name       String?
  shortName  String?
  clubId     Int?
  club       Club?   @relation(fields: [clubId], references: [id])
  leagueId    Int
  league      League   @relation(fields: [leagueId], references: [id])
  homeGames  Game[] @relation("HomeGames")
  guestGames Game[] @relation("GuestGames")

  @@map("team")
}

model Player {
  id           Int     @id
  firstName    String
  lastName     String
  clubId       Int?
  club         Club?   @relation(fields: [clubId], references: [id])
  homeMatches  Match[] @relation("HomeMatches")
  guestMatches Match[] @relation("GuestMatches")

  @@map("player")
}

model Game {
  id      Int      @id
  homeId  Int
  guestId Int
  result  String
  date    DateTime @db.Date
  home    Team     @relation("HomeGames", fields: [homeId], references: [id])
  guest   Team     @relation("GuestGames", fields: [guestId], references: [id])
  matches Match[]

  @@map("game")
}

model Match {
  id        String @id
  gameId    Int
  game      Game @relation(fields: [gameId], references: [id])
  player1Id Int
  player2Id Int
  player1   Player @relation("HomeMatches", fields: [player1Id], references: [id])
  player2   Player @relation("GuestMatches", fields: [player2Id], references: [id])
  s1        String
  s2        String
  s3        String
  s4        String
  s5        String
  sets      String
  result    String

  @@map("match")
}
